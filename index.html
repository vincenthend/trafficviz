<html>
    <head>
        <title>Bandung's Traffic Accidents</title>
        <script src="./js/d3.v5.min.js"></script>
    </head>
    <body>
    </body>
    <script>
		load();

		//Zoom
		function load(){
			d3.xml('./assets/map.svg').then(data => {
				document.body.append(data.documentElement);
				var svg = d3.select('svg');
				svg.attr("width","100%")
					.attr("height","100%")

				// Zoom
				svg.call(d3.zoom().scaleExtent([0.5,4.5])
					.on("zoom", function () {
					svg.select("#Map").attr("transform", d3.event.transform);
					})
				)
				
				var dataLine = d3.selectAll("#DataLine *");

				dataLine.attr('pointer-events', 'visibleStroke')
					.attr('def-stroke',dataLine.attr('stroke'))
					.on("mouseover", function(){
						// Make it brighter
						var d = d3.select(this);
						d.transition().duration(200).attr('stroke',d3.hsl(d.attr('stroke')).brighter(0.8))
					})
					.on("mouseout", function(){
						// Make it normal
						var d = d3.select(this);
						d.transition().duration(200).attr('stroke',d.attr('def-stroke'))
					})
					.on("click",function(){
						// Respond to click on road						
						var d = d3.select(this);
						console.log(d.attr('id'))
					})
			});
		}

    </script>
</html>